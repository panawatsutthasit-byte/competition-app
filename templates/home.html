{% extends "base.html" %}
{% block body_class %}home{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<style>
  /* พื้นหลังเฉพาะหน้า Home: ไล่เฉด + ลายจุดจาง ๆ */
  body.home{
    --bg-top:#f7f9fc; --bg-mid:#ffffff;
    background:
      radial-gradient(14px 14px at 25% 30%, rgba(13,110,253,.06) 22%, transparent 23%) repeat,
      radial-gradient(14px 14px at 75% 70%, rgba(32,201,151,.06) 22%, transparent 23%) repeat,
      linear-gradient(180deg, var(--bg-top) 0%, var(--bg-mid) 55%);
    background-size: 30px 30px, 30px 30px, auto;
  }

  :root{ --ink-muted:#6c757d; }

  /* HERO */
  .hero{
    position:relative; overflow:hidden; border-radius:.75rem;
    background:
      radial-gradient(1200px 400px at -10% -20%, rgba(255,255,255,.05), transparent 60%),
      radial-gradient(800px 300px at 110% 10%, rgba(255,255,255,.06), transparent 70%),
      linear-gradient(135deg,#212529,#343a40 60%);
  }
  .hero::after{
    content:""; position:absolute; inset:0; opacity:.18;
    background:
      url("{{ url_for('static', filename='home-hero.jpg') }}") center/cover no-repeat,
      url("https://images.unsplash.com/photo-1517649763962-0c623066013b?q=80&w=1400&auto=format&fit=crop");
    mix-blend-mode: overlay;
  }
  .hero-body{ position:relative; z-index:1; }
  .hero-sub{ color:rgba(255,255,255,.92); }

  /* Feature cards */
  .card.feature{ border:0; border-radius:1rem; box-shadow:0 .25rem 1rem rgba(0,0,0,.06) }
  .card.feature .bi{ font-size:1.6rem; }

  /* Glass card */
  .glass{
    background:rgba(255,255,255,.65);
    backdrop-filter:saturate(140%) blur(6px);
    border:1px solid rgba(0,0,0,.06); border-radius:1rem;
  }

  /* การ์ดภาพโปรโมต */
  .welcome-card{
    position: relative; overflow:hidden; border-radius:.75rem; min-height:260px;
    background:
      linear-gradient(135deg, rgba(13,110,253,.25), rgba(32,201,151,.25)),
      url("{{ url_for('static', filename='basketball.jpg') }}") center/cover no-repeat,
      url("https://source.unsplash.com/1200x800/?basketball");
    box-shadow: 0 .25rem 1rem rgba(0,0,0,.08);
  }
  .welcome-card::after{ content:""; position:absolute; inset:0; background:rgba(0,0,0,.35); }
  .welcome-card .caption{
    position:absolute; left:1rem; right:1rem; bottom:1rem; color:#fff;
    text-shadow:0 3px 12px rgba(0,0,0,.55); z-index:1
  }
  @media (min-width: 992px){ .welcome-card{min-height:300px;} }

  @media (prefers-reduced-motion:no-preference){
    .welcome-card, .card.feature{ transition:transform .2s ease, box-shadow .2s ease; }
    .welcome-card:hover, .card.feature:hover{ transform:translateY(-2px); box-shadow:0 .75rem 2rem rgba(0,0,0,.12); }
  }
</style>
{% endblock %}

{% block content %}

<!-- HERO -->
<section class="hero hero-auto text-white mb-4" role="region" aria-label="ภาพรวมระบบและปุ่มนำทางหลัก">
  <div class="hero-body p-4 p-md-5">
    <h1 class="display-5 fw-bold">{{ event.name }}</h1>
    <p class="lead hero-sub mb-4">
      ระบบลงทะเบียนและบริหารจัดการแข่งขันสำหรับโรงเรียน/วิทยาลัย ใช้งานง่าย
      บันทึกผลได้รวดเร็ว และดูสถิติรวมผ่าน <b>Dashboard</b> ได้ทันที
    </p>

    <!-- CTA -->
    <div class="btn-wrap">
      <a href="{{ url_for('register') }}"
         class="btn btn-warning btn-lg {% if not event.reg_open %}disabled{% endif %}">
        ลงทะเบียนเลย
      </a>
      <a href="{{ url_for('results') }}" class="btn btn-success btn-lg">บันทึกผล</a>
      <a href="{{ url_for('leaderboard') }}" class="btn btn-outline-light btn-lg">ผลการแข่งขัน</a>
      <a href="{{ url_for('dashboard') }}" class="btn btn-outline-light btn-lg">Dashboard</a>
    </div>
  </div>
</section>

<!-- Features -->
<section class="row g-4 mb-4" aria-label="คุณสมบัติเด่น">
  <div class="col-md-4">
    <div class="card feature h-100">
      <div class="card-body">
        <div class="d-flex align-items-start gap-3">
          <i class="bi bi-clipboard-check text-primary"></i>
          <div>
            <h5 class="card-title mb-1">ลงทะเบียนเร็วมาก</h5>
            <p class="text-muted mb-2">รองรับหลายประเภทกีฬา ป้องกันสมัครซ้ำอัตโนมัติ</p>
            <a href="{{ url_for('register') }}" class="btn btn-primary btn-sm">เริ่มลงทะเบียน</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card feature h-100">
      <div class="card-body">
        <div class="d-flex align-items-start gap-3">
          <i class="bi bi-trophy text-warning"></i>
          <div>
            <h5 class="card-title mb-1">บันทึกผลได้ทันใจ</h5>
            <p class="text-muted mb-2">ค้นหาผู้เข้าแข่งขันตามวัน/ประเภท แล้วกรอกอันดับ คะแนน และหมายเหตุ</p>
            <a href="{{ url_for('results') }}" class="btn btn-outline-secondary btn-sm">บันทึกผล</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card feature h-100">
      <div class="card-body">
        <div class="d-flex align-items-start gap-3">
          <i class="bi bi-graph-up-arrow text-success"></i>
          <div>
            <h5 class="card-title mb-1">Dashboard สรุปภาพรวม</h5>
            <p class="text-muted mb-2">ดูจำนวนผู้สมัคร โรงเรียนที่เข้าร่วม Top school และความคืบหน้าการใส่ผล</p>
            <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary btn-sm">เปิดดู Dashboard</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- About + Promo -->
<section class="row g-4" aria-label="เกี่ยวกับระบบและภาพโปรโมต">
  <div class="col-lg-6">
    <div class="card glass h-100">
      <div class="card-body">
        <h4 class="fw-bold mb-2">เกี่ยวกับระบบ</h4>
        <p class="text-muted">
          ระบบนี้ออกแบบมาเพื่อให้การจัดการแข่งขันในสถานศึกษาเป็นเรื่องง่าย ตั้งแต่การสมัคร
          การบันทึกผล ไปจนถึงการสรุปสถิติแบบเรียลไทม์ รองรับการกรองตามวันที่ ประเภทกีฬา
          และโรงเรียน เพื่อช่วยทีมงานทำงานได้รวดเร็วและลดความผิดพลาด
        </p>
        <ul class="text-muted mb-0">
          <li>ป้องกันสมัครซ้ำ: คน/ประเภท/วันเดียวกัน</li>
          <li>กรองรายการบันทึกผลตามวันที่และประเภท</li>
          <li>แสดงผลรวมและอันดับแบบชัดเจน</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="col-lg-6">
    <div class="welcome-card" role="img" aria-label="Basketball highlight banner">
      <div class="caption">
        <h5 class="mb-1">Welcome to {{ site_name }}</h5>
        <div class="text-white-50 small">จัดงานกีฬาให้เป็นระบบ สวยงาม และสรุปผลได้ในไม่กี่คลิก</div>
      </div>
    </div>
  </div>
</section>

{% endblock %}
